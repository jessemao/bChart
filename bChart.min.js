/*! bChart - v0.1.0 - 2015-05-26
* Copyright (c) 2015 Jingxian Mao; Licensed MIT */

!function(a){"use strict";"function"==typeof define&&define.amd?define([],a):window.bChart=a()}(function(){"use strict";var a={},b={},c=function(b){if(c.existy(b)&&c.typeString(b)){if(arguments.length>=2){var d="";switch(arguments[1].toLowerCase()){case"bar":d="BarChart";break;case"scatter":d="ScatterChart";break;case"bubble":d="BubbleChart";break;case"line":d="LineChart";break;case"area":d="AreaChart";break;case"pie":d="PieChart"}return 3===arguments.length?new c[d](arguments[0],arguments[2]):new c[d](arguments[0])}if(1===arguments.length&&c.isSelector(b))return a[b]}};c._init=function(a,p){var q={};switch(p){case"bar":q=f;break;case"scatter":q=n;break;case"bubble":q=h;break;case"line":q=j;break;case"area":q=d;break;case"pie":q=l}switch(b=c.clone(q),c.typeString(a)&&c.isSelector(a)?b.selector=a:c.typeObject(a)&&c.each(a,function(a,c){b[c]=a}),p){case"bar":return new g(b.selector,b);case"scatter":return new o(b.selector,b);case"bubble":return new i(b.selector,b);case"line":return new k(b.selector,b);case"area":return new e(b.selector,b);case"pie":return new m(b.selector,b)}},c._customConstructor=function(a,d,e,f){var g={};if(c.existy(d))if(1===e.length){if(c.existy(c.getObjectBySelector(d))&&c.isSelector(d))return c.getObjectBySelector(d);b.selector===d&&c.truthy(b.selector)||(a=c._init(d,f))}else e[0]===b.selector&&c.truthy(b.selector)?(a._options=c.clone(e[1]),c.setObjectOfSelector(d,a),a.setOptions(c.clone(e[1])).draw()):(g=e[1],g.selector=d,a=c._init(g,f));return a},c.getObjectBySelector=function(b){return a[b]},c.setObjectOfSelector=function(b,c){a[b]=c},c.isSelector=function(a){return a.indexOf("#")>=0||a.indexOf(".")>=0},c.clone=function(a){return c.typeObject(a)?JSON.parse(JSON.stringify(a)):void 0},c.generateArray=function(a){for(var b=[],c=0;a>c;c+=1)b.push(c);return b},c.setChart=function(a,b){var c=this;return c[b]=a,c},c.existy=function(a){return null!=a},c.getUniqueValueArray=function(a){return function(b){if(c.existy(b)){var d=[];return c.each(b,function(b,c){d.indexOf(b[a])<0&&d.push(b[a])}),d}}},c.sorted=function(a,b){return a.sort(b)},c.typeDate=function(a){return isNaN(new Date(a).getTime())},c.each=function(a,b,d){if(c.isArrayLike(a))for(var e=c.getLength(a),f=0;e>f;f++)b(a[f],f,a);else for(var g in a)b(a[g],g,a)},c.property=function(a){return function(b){return c.existy(b)?b[a]:void 0}},c.hasProperty=function(a,b){if(c.typeString(b)){if(b.indexOf(".")>=0){var d=b.split(".");return c.existy(a[d[0]][d[1]])}return c.existy(a[b])}},c.setProperty=function(a,b,d){if(c.hasProperty(a,b)&&c.typeString(b))if(b.indexOf(".")>=0){var e=b.split(".");a[e[0]][e[1]]=d}else a[b]=d},c.getLength=c.property("length"),c.isArrayLike=function(a){if(c.typeString(a))return!1;var b=c.getLength(a);return c.typeNumber(b)&&b>=0},c.typeofObject=function(a){return function(b){return a(b)}},c.typeNumber=c.typeofObject(function(a){return!isNaN(a)}),c.typeString=c.typeofObject(function(a){return"string"==typeof a}),c.typeObject=c.typeofObject(function(a){return"object"==typeof a}),c.existy=function(a){return null!=a},c.truthy=function(a){return a!==!1&&c.existy(a)},c.hexToRGBA=function(a,b){var c=a.replace("#",""),d=parseInt(c.substring(0,2),16),e=parseInt(c.substring(2,4),16),f=parseInt(c.substring(4,6),16);return"rgba("+d+","+e+","+f+","+b+")"},c.getIndexOfElement=function(a,b){return c.existy(b)?b.indexOf(a):-1},c.isElementInArray=function(a,b){return c.getIndexOfElement(a,b)>=0},c.concatNoDuplicate=function(a,b){var d=a.concat(b);return d.filter(function(a,b){return c.getIndexOfElement(a,d)===b})},c.removeElementFromArray=function(a,b){return c.isElementInArray(a,b)?(b.splice(c.getIndexOfElement(a,b),1),b):void 0},c.removeArrayFromArray=function(a,b){return a.filter(function(a,d){return!c.isElementInArray(a,b)})},c.isOverlapArray=function(a,b){var d=a.concat(b),e=d.filter(function(a,b){return c.getIndexOfElement(a,d)===b});return d.length!==e.length},c.isSubArray=function(a,b){var d=b.filter(function(b,d){return!c.isElementInArray(b,a)});return d.length>0?!1:!0},c.getSubArray=function(a,b){return c.isSubArray(a,b)?b:b.filter(function(b,d){return c.isElementInArray(b,a)})},c.prototype.area=function(a){var b=this;if(c.existy(a)){if(c.typeString(a)&&"refresh"===a)b._drawAreaSVG();else{if(2===arguments.length&&arguments[0].indexOf(".")>=0&&arguments[0].indexOf("$")>=0){var d=parseInt(arguments[0].split(".")[1].split("$")[1]),e=b._options._uniqueGroupArrayAll[d-1];arguments[0]=arguments[0].split(".")[0]+"."+e}b.setOptions(arguments,"area"),b._drawAreaSVG()}return b}return b._options.area},c.prototype._drawAreaSVG=function(a){var b,d,e=this,f=e._options._dataset,g=e._options._uniqueGroupArrayAll,h=d3.select(e._options.selector).select("g.bChart"),i=[];if(b=h.select(".bChart_areas").empty()?h.append("g").attr("class","bChart_areas"):h.select(".bChart_areas"),c.existy(a)){e._options.isStack&&(f=e.stackDataset(f,g,e._options._uniqueXArray));var j=function(a){var b=f.filter(function(b){return e._options.isStack?b[0].group===a:b.group===a});e._options.isStack?i.push(b[0]):i.push(b)};c.each(e._options._uniqueGroupArrayAll,j),d=b.selectAll(".bChart_groups").data(i),d.exit().remove(),d.enter().append("path");var k=d3.svg.area().x(function(b){return a.x0(b.x)}).y0(function(b){return e._options.isStack?b.y0<e._options.minDefault?a.y(e._options.minDefault):a.y(b.y0):e._options._chartSVGHeight}).y1(function(b){return e._options.isStack?a.y(parseFloat(b.y0)+parseFloat(b.y)):b.secondAxis?a.y2(b.value):a.y(b.value)});d.attr("d",k)}return d.attr("class",function(a,b){return"bChart_groups bChart_groups"+g.indexOf(a[b].group)}).attr("fill",function(a,b){return e._options._colorMap[a[b].group]}).attr("fill-opacity",function(a,b){return e._options.area.fillOpacity[a[b].group]}).attr("stroke",function(a,b){return e._options._colorMap[a[b].group]}).attr("stroke-width",function(a,b){return e._options.area.strokeWidth[a[b].group]}).attr("stroke-opacity",function(a,b){return e._options.area.strokeOpacity[a[b].group]}).style("opacity",.1).transition().duration(e._options.duration).style("opacity",1),e},c.initAreaStyle=function(a){return function(b,d){var e=this;e._options.area[a][b]=c.hasProperty(e._options.area[a],b)?e._options.area[a][b]:d}},c.initAreaType=c.initAreaStyle("type"),c.initAreaFillOpacity=c.initAreaStyle("fillOpacity"),c.initAreaStrokeWidth=c.initAreaStyle("strokeWidth"),c.initAreaStrokeOpacity=c.initAreaStyle("strokeOpacity"),c.removeAreaProperty=function(a){return function(b){var d=this;c.hasProperty(d._options.area[a],b)&&delete d._options.area[a][b]}},c.removeAreaType=c.removeAreaProperty("type"),c.removeAreaStrokeWidth=c.removeAreaProperty("strokeWidth"),c.removeAreaStrokeOpacity=c.removeAreaProperty("strokeOpacity"),c.removeAreaFillOpacity=c.removeAreaProperty("fillOpacity");var d={selector:"",colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],colorOpacity:1,duration:400,padding:{top:80,right:90,bottom:50,left:60},_colorMap:{},_datasetTmp:[],_uniqueGroupTmp:[],_uniqueXArray:[],_uniqueGroupArrayAll:[],_uniqueGroupArray2:[],_dataset:[],isStack:!1,minDefault:-1,maxDefault:-1,minDefault2:-1,maxDefault2:-1,width:800,height:350,background:{imageURL:"",color:"#ffffff",displayImage:!1,opacity:1},secondAxis:!1,legend:{position:"topright",offsetText:5,offsetSymbol:15,symbolSize:10,multipleLine:!1,textFirst:!0,display:!0,fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},title:{display:!0,text:"Area Chart",fontType:"helvetica",fontSize:18,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},xLabel:{display:!0,text:"x label",rotation:0,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel:{display:!0,text:"y label",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel2:{display:!0,text:"y label second",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yAxis:{display:!0,displayLine:!0,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"left",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},yAxis2:{display:!0,displayLine:!1,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"right",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},xAxis:{display:!0,isTimeSeries:!1,displayLine:!0,tickNumber:5,tickFormat:"",tickPadding:3,tickSize:10,orientation:"bottom",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},tooltip:{display:!0,text:"tooltip",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#fff",width:"auto",height:"auto"},area:{type:{},strokeWidth:{},strokeOpacity:{},fillOpacity:{}}},e=function(a){return c._customConstructor(this,a,arguments,"area")};c.AreaChart=e,e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.prototype.draw=function(){var a=this;return c.getLength(d3.select(a._options.selector))?(a.min("refresh").max("refresh").updateMin(),a._options.secondAxis&&a.min2("refresh").max2("refresh").updateMin2(),a.colors("refresh")._drawChartSVG(),a.title("refresh").legend("refresh").tooltip("refresh").xLabel("refresh").yLabel("refresh").xAxis("refresh").yAxis("refresh"),void(a._options.secondAxis&&a.yLabel2("refresh").yAxis2("refresh"))):void console.log("Please make sure the element exists in your template.")},e.prototype._drawAreaChart=function(){var a=this,b=a._initXYAxis();return a._drawAreaSVG(b),a},c.prototype.background=function(a){function b(){var a,b=d3.select(d._options.selector);a=b.select(".bChart_background").empty()?b.append("div").attr("class","bChart_background"):b.select(".bChart_background"),a.style("width",d._options.width+"px").style("height",d._options.height+"px"),d._options.background.displayImage?c.existy(d._options.background.imageURL)?a.style("background-image","url("+d._options.background.imageURL+")").style("opacity",d._options.background.opacity):d._options.background.displayImage=!1:a.style("background-image","none").style("background-color",d._options.background.color).style("opacity",d._options.background.opacity)}var d=this;return c.existy(a)?(c.typeString(a)&&"refresh"===a?b():(d.setOptions(arguments,"background"),b()),d):d._options.background};var f={selector:"",colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],colorOpacity:1,barDistance:2,duration:400,padding:{top:80,right:90,bottom:50,left:60},_colorMap:{},_datasetTmp:[],_uniqueGroupTmp:[],_uniqueXArray:[],_uniqueGroupArrayAll:[],_uniqueGroupArray2:[],_dataset:[],minDefault:-1,maxDefault:-1,minDefault2:-1,maxDefault2:-1,width:800,height:350,background:{imageURL:"",color:"#ffffff",displayImage:!1,opacity:1},secondAxis:!1,isStack:!1,legend:{position:"topright",offsetText:5,offsetSymbol:15,symbolSize:10,multipleLine:!1,textFirst:!0,display:!0,fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},title:{display:!0,text:"Bar Chart",fontType:"helvetica",fontSize:18,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},xLabel:{display:!0,text:"x label",rotation:0,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel:{display:!0,text:"y label",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel2:{display:!0,text:"y label second",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yAxis:{display:!0,displayLine:!0,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"left",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},yAxis2:{display:!0,displayLine:!1,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"right",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},xAxis:{display:!0,displayLine:!0,tickNumber:5,tickFormat:"",tickPadding:3,tickSize:10,orientation:"bottom",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},tooltip:{display:!0,text:"tooltip",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#fff",width:"auto",height:"auto"}},g=function(a){return c._customConstructor(this,a,arguments,"bar")};c.BarChart=g,g.prototype=Object.create(c.prototype),g.prototype.constructor=g,g.prototype.draw=function(){var a=this;return c.getLength(d3.select(a._options.selector))?(a.min("refresh").max("refresh").updateMin(),a._options.secondAxis&&a.min2("refresh").max2("refresh").updateMin2(),a.colors("refresh")._drawChartSVG(),a.title("refresh").legend("refresh").tooltip("refresh").xLabel("refresh").yLabel("refresh").xAxis("refresh").yAxis("refresh"),void(a._options.secondAxis&&a.yLabel2("refresh").yAxis2("refresh"))):void console.log("Please make sure the element exists in your template.")},g.prototype._drawBarChart=function(){function a(){var a=d._options._dataset,b=d._options._uniqueGroupArrayAll,c=d.stackDataset(a,b,d._options._uniqueXArray),g=e.selectAll(".bChart_stackBar").data(c);g.exit().remove(),g.enter().append("g").attr("class",function(a,b){return"bChart_stackBar"});var h=g.selectAll("rect").data(function(a){return a});h.exit().remove(),h.enter().append("rect").attr("class",function(a){return"bChart_groups bChart_groups"+d._options._uniqueGroupArrayAll.indexOf(a.group)}),h.attr("width",f.rangeBand()-d._options.barDistance).attr("x",function(a){return f(a.x)+d._options.barDistance/2}).attr("y",d._options._chartSVGHeight).attr("height",0).style("fill",function(a){return d._options._colorMap[a.group]}).style("stroke",function(a,b){return d._options._colorMap[a.group]}).style("stroke-width",0).transition().duration(d._options.duration).attr("y",function(a){return i(a.y0+a.y)}).attr("height",function(a,b){return a.group===d._options._uniqueGroupArrayAll[0]?d._options._chartSVGHeight-i(a.y+a.y0):i(a.y0)-i(a.y+a.y0)})}function b(){var a=d._options._dataset,b=d._options._uniqueGroupArrayAll,h=[];c.each(d._options._uniqueXArray,function(b,c){var d=a.filter(function(a){return a.x===b});h.push({x:b,data:d})});var j=e.selectAll(".bChart_groupBar").data(h);j.exit().remove(),j.enter().append("g").attr("class",function(a,b){return"bChart_groupBar"}),j.attr("transform",function(a){return"translate("+f(a.x)+",0)"});var l=j.selectAll("rect").data(function(a){return a.data});l.exit().transition().attr("height",0).remove(),l.enter().append("rect").attr("class",function(a){return"bChart_groups bChart_groups"+b.indexOf(a.group)}),l.attr("width",g.rangeBand()-d._options.barDistance).attr("x",function(a,b){return g(a.group)+d._options.barDistance/2}).attr("y",d._options._chartSVGHeight).attr("height",0).style("fill",function(a,b){return d._options._colorMap[a.group]}).style("stroke",function(a,b){return d._options._colorMap[a.group]}).style("stroke-width",0).transition().duration(d._options.duration).attr("y",function(a){return a.secondAxis?k(a.value):i(a.value)}).attr("height",function(a){return a.secondAxis?d._options._chartSVGHeight-k(a.value):d._options._chartSVGHeight-i(a.value)})}var d=this;d._updateChartSize();var e=d3.select(d._options.selector).select("g.bChart"),f=d3.scale.ordinal().rangeRoundBands([0,d._options._chartSVGWidth],.1).domain(d._options._uniqueXArray),g=d3.scale.ordinal().rangeRoundBands([0,f.rangeBand()]).domain(d._options._uniqueGroupArrayAll);d._options.xAxis.tickSize=-d._options._chartSVGHeight,d._options.yAxis.tickSize=-d._options._chartSVGWidth;var h=d3.svg.axis().scale(f).orient(d._options.xAxis.orientation).ticks(d._options.xAxis.tickNumber).tickSize(d._options.xAxis.tickSize,0,0);e.select(".bChart_x_axis").empty()?e.append("g").attr("class","bChart_x_axis bChart_grid").attr("transform","translate(0,"+d._options._chartSVGHeight+")").call(h):e.select(".bChart_x_axis").transition().duration(d._options.duration).ease("sin-in-out").call(h);var i=d3.scale.linear().range([d._options._chartSVGHeight,0]).domain([d._options.minDefault,d._options.maxDefault]),j=d3.svg.axis().scale(i).orient(d._options.yAxis.orientation).tickFormat(d._options.yAxis.tickFormat).ticks(d._options.yAxis.tickNumber).tickSize(d._options.yAxis.tickSize,0,0);if(e.select(".bChart_y_axis").empty()?e.append("g").attr("class","bChart_y_axis bChart_grid").call(j):e.select(".bChart_y_axis").transition().duration(d._options.duration).ease("sin-in-out").call(j),d._options.secondAxis){var k=d3.scale.linear().range([d._options._chartSVGHeight,0]).domain([d._options.minDefault2,d._options.maxDefault2]),l=d3.svg.axis().scale(k).orient(d._options.yAxis2.orientation).tickFormat(d._options.yAxis2.tickFormat).ticks(d._options.yAxis2.tickNumber).tickSize(d._options.yAxis2.tickSize,0,0);e.select(".bChart_y_axis_2").empty()?e.append("g").attr("class","bChart_y_axis_2 bChart_grid").attr("transform","translate("+d._options._chartSVGWidth+",0)").call(l):e.select(".bChart_y_axis_2").attr("transform","translate("+d._options._chartSVGWidth+",0)").transition().duration(d._options.duration).ease("sin-in-out").call(l)}return d._options.isStack?a():b(),d},c.prototype.options=function(a){var b=this;return c.existy(a)?c.typeString(a)&&1===arguments.length?b._options[a]:(b.setOptions(arguments).draw(),b):b._options},c.prototype.setOptions=function(a,b){var d,e,f=this,g=function(a){return function(b){if(c.existy(b)){var d={};c.typeString(b)?1==arguments.length?d={selector:b}:d[arguments[0]]=arguments[1]:d=b,c.existy(a)?c.typeString(a)&&"_dataset"===a?(c.each(b,function(a,b,d){c.existy(d[b].group)||(d[b].group="")}),f._options[a]=b):c.each(d,function(b,d){c.setProperty(f._options[a],d,b)}):c.each(d,function(a,b){"data"===b?f.load(a):c.setProperty(f._options,b,a)})}}};if(d=c.existy(b)?g(b):g(),c.isArrayLike(a))if(1==a.length){if(!c.typeObject(a[0]))return console.log("Can't update the property!"),f;e=a[0],d(e)}else d(a[0],a[1]);else e=a,d(e);return f},c.prototype.getOptions=function(a){var b=this;return c.existy(a)?c.hasProperty(b._options,a)?b._options[a]:void 0:b.options},c.prototype.width=function(a){var b=this;return c.existy(a)&&c.typeNumber(a)?(b._options.width=a,c.typeNumber(a)?(b._options.width=a,b._updateChartSize()._drawChartSVG().xAxis("refresh").xLabel("refresh")):c.typeString(a)&&"refresh"===a&&b._updateChartSize()._drawChartSVG().xAxis("refresh").xLabel("refresh"),b):b._options.width},c.prototype.height=function(a){var b=this;return c.existy(a)?(c.typeNumber(a)?(b._options.height=a,b._updateChartSize()._drawChartSVG().yAxis("refresh").yAxis2("refresh").yLabel("refresh").yLabel2("refresh")):c.typeString(a)&&"refresh"===a&&b._updateChartSize()._drawChartSVG().yAxis("refresh").yAxis2("refresh").yLabel("refresh").yLabel2("refresh"),b):b._options.height},c.prototype._updateChartSize=function(){var a,b,c=this;c._options.legend.position.indexOf("right")>=0&&c._options.secondAxis?c._options.padding.right=150:c._options.padding.right=90,c._options._chartSVGWidth=c._options.width-c._options.padding.left-c._options.padding.right,c._options._chartSVGHeight=c._options.height-c._options.padding.top-c._options.padding.bottom;var d=d3.select(c._options.selector);return a=d.select("svg").empty()?d.append("svg"):d.select("svg"),a.attr("width",c._options.width).attr("height",c._options.height),b=a.select("g.bChart").empty()?a.append("g").attr("class","bChart"):a.select("g.bChart"),b.attr("width",c._options._chartSVGWidth).attr("height",c._options._chartSVGHeight).attr("transform","translate("+c._options.padding.left+","+c._options.padding.top+")"),c},c.prototype._drawChartSVG=function(){var a=this;switch(a.constructor){case g:return a._drawBarChart();case o:return a._drawScatterChart();case i:return a._drawBubbleChart();case k:return a._drawLineChart();case e:return a._drawAreaChart();case m:return a._drawPieChart()}},c.prototype._initXYAxis=function(){var a=this;a._updateChartSize();var b,c,d,e,f,g,h=d3.select(a._options.selector).select("g.bChart");return a._options.xAxis.isTimeSeries||(b=d3.scale.ordinal().rangePoints([0,a._options._chartSVGWidth],.1).domain(a._options._uniqueXArray)),a._options.xAxis.tickSize=-a._options._chartSVGHeight,a._options.yAxis.tickSize=-a._options._chartSVGWidth,g=d3.svg.axis().scale(b).orient(a._options.xAxis.orientation).ticks(a._options.xAxis.tickNumber).tickSize(a._options.xAxis.tickSize,0,0),h.select(".bChart_x_axis").empty()?h.append("g").attr("class","bChart_x_axis bChart_grid").attr("transform","translate(0,"+a._options._chartSVGHeight+")").call(g):h.select(".bChart_x_axis").transition().duration(a._options.duration).ease("sin-in-out").call(g),c=d3.scale.linear().range([a._options._chartSVGHeight,0]).domain([a._options.minDefault,a._options.maxDefault]),e=d3.svg.axis().scale(c).orient(a._options.yAxis.orientation).tickFormat(a._options.yAxis.tickFormat).ticks(a._options.yAxis.tickNumber).tickSize(a._options.yAxis.tickSize,0,0),h.select(".bChart_y_axis").empty()?h.append("g").attr("class","bChart_y_axis bChart_grid").call(e):h.select(".bChart_y_axis").transition().duration(a._options.duration).ease("sin-in-out").call(e),a._options.secondAxis&&(d=d3.scale.linear().range([a._options._chartSVGHeight,0]).domain([a._options.minDefault2,a._options.maxDefault2]),f=d3.svg.axis().scale(d).orient(a._options.yAxis2.orientation).tickFormat(a._options.yAxis2.tickFormat).ticks(a._options.yAxis2.tickNumber).tickSize(a._options.yAxis2.tickSize,0,0),h.select(".bChart_y_axis_2").empty()?h.append("g").attr("class","bChart_y_axis_2 bChart_grid").attr("transform","translate("+a._options._chartSVGWidth+",0)").call(f):h.select(".bChart_y_axis_2").attr("transform","translate("+a._options._chartSVGWidth+",0)").transition().duration(a._options.duration).ease("sin-in-out").call(f)),{x0:b,y:c,y2:d}},c.prototype.bubble=function(a){function b(){d._drawChartSVG()}var d=this;if(c.existy(a)){if(c.typeString(a))"refresh"===a?b():"clear"===a&&(d._options.bubble={});else{var e;if(c.isArrayLike(a))e={},c.each(a,function(a,b){var f,g;c.typeNumber(a[0])?c.existy(d._options._uniqueGroupArrayAll[b])&&(f=d._options._uniqueGroupArrayAll[b],g=a):(f=a[0],g=a,g.shift()),e[f]=g;var h=0;c.each(d._options._dataset,function(a){a.group===f&&(a.size=g[h],h++)})});else if(2===arguments.length){var f=0,g=arguments;c.each(d._options._dataset,function(a){a.group===g[0]&&(a.size=g[1][f],f++)}),e=g}else c.each(a,function(a,b){var e=0;c.each(d._options._dataset,function(c){c.group===b&&(c.size=a[e],e++)})}),e=a;d.setOptions(e,"bubble"),b()}return d}return d._options.bubble};var h={selector:"",colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],colorOpacity:1,duration:400,padding:{top:80,right:90,bottom:50,left:60},_colorMap:{},_datasetTmp:[],_uniqueGroupTmp:[],_uniqueXArray:[],_uniqueGroupArrayAll:[],_uniqueGroupArray2:[],_dataset:[],bubble:{},minDefault:-1,maxDefault:-1,minDefault2:-1,maxDefault2:-1,width:800,height:350,background:{imageURL:"",color:"#ffffff",displayImage:!1,opacity:1},secondAxis:!1,legend:{position:"topright",offsetText:5,offsetSymbol:15,symbolSize:10,multipleLine:!1,textFirst:!0,display:!0,fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},title:{display:!0,text:"Bubble Chart",fontType:"helvetica",fontSize:18,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},xLabel:{display:!0,text:"x label",rotation:0,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel:{display:!0,text:"y label",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel2:{display:!0,text:"y label second",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yAxis:{display:!0,displayLine:!0,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"left",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},yAxis2:{display:!0,displayLine:!1,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"right",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},xAxis:{display:!0,isTimeSeries:!1,displayLine:!0,tickNumber:5,tickFormat:"",tickPadding:3,tickSize:10,orientation:"bottom",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},tooltip:{display:!0,text:"tooltip",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#fff",width:"auto",height:"auto"},node:{display:!0,type:{},size:{},fillOpacity:{},strokeWidth:{}}},i=function(a){return c._customConstructor(this,a,arguments,"bubble")};c.BubbleChart=i,i.prototype=Object.create(c.prototype),i.prototype.constructor=i,i.prototype.draw=function(){var a=this;return c.getLength(d3.select(a._options.selector))?(a.min("refresh").max("refresh").updateMin(),a._options.secondAxis&&a.min2("refresh").max2("refresh").updateMin2(),a.colors("refresh")._drawChartSVG(),a.title("refresh").legend("refresh").tooltip("refresh").xLabel("refresh").yLabel("refresh").xAxis("refresh").yAxis("refresh"),void(a._options.secondAxis&&a.yLabel2("refresh").yAxis2("refresh"))):void console.log("Please make sure the element exists in your template.")},i.prototype._drawBubbleChart=function(){var a=this,b=a._initXYAxis();return a._drawNodeSVG(b).node("refresh"),a},c.prototype.colors=function(a){function b(){var a="";c.each(d._options._uniqueGroupArrayAll,function(b,e){a=d._options.colors[e].indexOf("#")>=0?c.hexToRGBA(d._options.colors[e%d._options.colors.length],d._options.colorOpacity):d._options.colors[e%d._options.colors.length],d._options._colorMap[b]=a})}var d=this;return c.existy(a)?(c.typeString(a)&&"refresh"===a?b():(d.setOptions(arguments,"colors"),b()),d):d._options.colors},c.prototype.stackDataset=function(a,b,d){var e=d3.layout.stack(),f=e(b.map(function(b){var e=[],f=[];return c.each(a,function(a,c,d){b===d[c].group&&e.push(d[c])}),f=e.filter(function(a,b){return d.indexOf(a.x)>=0}),f.map(function(a){return{x:a.x,value:+parseFloat(a.value),secondAxis:a.secondAxis,y:+parseFloat(a.value),group:a.group}})}));return f},c.prototype.load=function(a){var b=this;return c.existy(a)&&(c.isArrayLike(a)?b.loadArrayData(a):c.typeObject(a)&&b.loadObjectData(a)),d3.select(b._options.selector).select("svg").empty()||(b.constructor===m?(b.colors("refresh")._drawChartSVG(),b.title("refresh").legend("refresh").tooltip("refresh")):(b._options.secondAxis&&b.min2("refresh").max2("refresh").updateMin2(),b.min("refresh").max("refresh").updateMin().colors("refresh")._drawChartSVG().legend("refresh").tooltip("refresh"))),b},c.prototype.loadObjectData=function(a){var b=this;c.hasProperty(a,"dataValue")&&(c.hasProperty(a,"groups")&&(a.groups=a.groups.splice(0,a.dataValue.length),b._options._uniqueGroupArrayAll=c.concatNoDuplicate(b._options._uniqueGroupArrayAll,a.groups)),c.hasProperty(a,"x")&&(b._options._uniqueXArray=c.concatNoDuplicate(b._options._uniqueXArray,a.x)),c.hasProperty(a,"groups2")&&a.groups2.length>0&&(b._options.secondAxis=!0,b._options._uniqueGroupArray2=c.concatNoDuplicate(b._options._uniqueGroupArray2,a.groups2)),c.isArrayLike(a.dataValue)&&b.loadArrayData(a.dataValue,a))},c.prototype.loadArrayData=function(a,b){function d(a,b){c.each(a[h],function(d,j){if(c.typeNumber(a[h][j])){var k={x:"",group:i,value:a[h][j]};if(k=c.typeNumber(a[h][0])?e(k,b,j):e(k,b,j-1),c.existy(b)&&c.hasProperty(b,"bubbleValue")){var l=b.bubbleValue.filter(function(a){return a[0]===i});c.existy(l[0])&&l[0].length>0&&(f._options.bubble[i]=l[0],k.size=l[0][j])}g||f._options._uniqueXArray.push(k.x),c.isElementInArray(i,f._options._uniqueGroupArray2)?k.secondAxis=!0:k.secondAxis=!1,f._options._dataset.push(k)}})}function e(a,b,d){return c.existy(b)&&c.hasProperty(b,"x")&&c.existy(b.x[d])?a.x=b.x[d]:c.existy(f._options._uniqueXArray[d])?a.x=f._options._uniqueXArray[d]:a.x=d,a}var f=this,g=f._options._uniqueXArray.length>0;if(c.isArrayLike(a[0])&&!c.typeNumber(a[0][0]))for(var h=0;h<a.length;h+=1){var i="";i=c.existy(b)&&c.hasProperty(b,"groups")&&c.existy(b.groups[h])?b.groups[h]:c.typeNumber(a[h][0])?"data":a[h][0],c.isElementInArray(i,f._options._uniqueGroupArrayAll)||f._options._uniqueGroupArrayAll.push(i),c.hasProperty(f._options,"node")&&(c.existy(b)&&c.hasProperty(b,"nodeType")?c.initNodeType.call(f,i,b.nodeType[h]):c.initNodeType.call(f,i,"circle"),c.initNodeSize.call(f,i,128),c.initNodeFillOpacity.call(f,i,1),c.initNodeStrokeWidth.call(f,i,1)),c.hasProperty(f._options,"line")&&(c.initLineType.call(f,i,"linear"),c.initLineStrokeWidth.call(f,i,"3"),c.initLineStrokeOpacity.call(f,i,"1")),c.hasProperty(f._options,"area")&&(f.options.isStack?c.initAreaFillOpacity.call(f,i,"0.8"):c.initAreaFillOpacity.call(f,i,"0.4"),c.initAreaStrokeOpacity.call(f,i,"1"),c.initAreaStrokeWidth.call(f,i,"1")),d(a,b)}},c.prototype.unload=function(a){var b=this,d=function(a){c.each(a,function(a){c.removeElementFromArray(a,b._options._uniqueGroupArrayAll),b._options._dataset=b._options._dataset.filter(function(b){return a!==b.group}),c.isElementInArray(a,b._options._uniqueGroupArray2)&&(c.removeElementFromArray(a,b._options._uniqueGroupArray2),b._options.secondAxis=!!b._options._uniqueGroupArray2.length),c.hasProperty(b._options,"node")&&c.existy(b._options.node.type[a.group])&&(c.removeNodeType.call(b,a.group),c.removeNodeSize.call(b,a.group),c.removeNodeStrokeWidth.call(b,a.group),c.removeNodeStrokeOpacity.call(b,a.group),c.removeNodeFillOpacity.call(b,a.group)),c.hasProperty(b._options,"line")&&c.existy(b._options.line.type[a.group])&&(c.removeLineType.call(b,a.group),c.removeLineStrokeWidth.call(b,a.group),c.removeLineStrokeOpacity.call(b,a.group)),c.hasProperty(b._options,"area")&&c.existy(b._options.area.fillOpacity[a.group])&&(c.removeAreaFillOpacity.call(b,a.group),c.removeAreaStrokeOpacity.call(b,a.group),c.removeAreaStrokeWidth.call(b,a.group))})};c.existy(a)&&(c.isArrayLike(a)?d(a):(c.hasProperty(a,"x")&&c.isArrayLike(a.x)&&c.each(a.x,function(a){
c.removeElementFromArray(a,b._options._uniqueXArray),b._options._dataset=b._options._dataset.filter(function(b){return a!==b.x})}),c.hasProperty(a,"groups")&&c.isArrayLike(a.groups)&&d(a.groups))),d3.select(b._options.selector).select("svg").empty()||(b.constructor===m?(b.colors("refresh")._drawChartSVG(),b.title("refresh").legend("refresh").tooltip("refresh")):(b._options.secondAxis&&b.min2("refresh").max2("refresh").updateMin2(),b.min("refresh").max("refresh").updateMin().colors("refresh")._drawChartSVG().yAxis2("refresh").yLabel2("refresh").legend("refresh").tooltip("refresh")))},c.prototype._dataset=function(a){var b=this;return c.existy(a)&&c.typeString(a)&&"option"===a?b._options._dataset:(b.setOptions(arguments,"_dataset").draw(),b)},c.prototype.legend=function(a){function b(){var a=[],b=d3.select(d._options.selector).select("g.bChart");if(d._options.legend.display){b.selectAll(".bChart_legend").empty()||b.selectAll(".bChart_legend").remove();var e,f,g,h,i,j=d._options._uniqueGroupArrayAll,k=b.selectAll(".bChart_legend").data(j).enter().append("g").attr("class","bChart_legend");switch(d._options.legend.position){case"topright":e=d._options._chartSVGWidth+d._options.padding.right+d._options.legend.offsetAdjust.horizontal-20,f=-60-d._options.legend.offsetAdjust.vertical,g=d._options._chartSVGWidth+d._options.padding.right+d._options.legend.offsetAdjust.horizontal-20-d._options.legend.offsetText,h=-56-d._options.legend.offsetAdjust.vertical,i="end";break;case"right":e=d._options._chartSVGWidth+d._options.padding.right+d._options.legend.offsetAdjust.horizontal-20,f=d._options._chartSVGHeight/2-d._options.legend.offsetAdjust.vertical-60,g=d._options._chartSVGWidth+d._options.padding.right+d._options.legend.offsetAdjust.horizontal-20-d._options.legend.offsetText,h=d._options._chartSVGHeight/2-d._options.legend.offsetAdjust.vertical-56,i="end";break;case"bottomright":e=d._options._chartSVGWidth+d._options.padding.right+d._options.legend.offsetAdjust.horizontal-20,f=d._options._chartSVGHeight+15-d._options.legend.offsetAdjust.vertical-60,g=d._options._chartSVGWidth+d._options.padding.right+d._options.legend.offsetAdjust.horizontal-20-d._options.legend.offsetText,h=d._options._chartSVGHeight+15-d._options.legend.offsetAdjust.vertical-56,i="end"}k.attr("transform",function(a,b){return"translate(0, "+b*d._options.legend.offsetSymbol+")"}).append("text").attr("x",g).attr("y",h).attr("dy",".35em").style("font-family",d._options.legend.fontType).style("text-decoration",function(){return d._options.legend.fontUnderline?"underline":"none"}).style("font-weight",function(){return d._options.legend.fontBold?"bold":"normal"}).style("font-style",function(){return d._options.legend.fontItalic?"italic":"normal"}).style("text-anchor",i).style("font-size",d._options.legend.fontSize).style("fill",d._options.legend.fontColor).text(function(a){return a}),k.append("rect").attr("x",e).attr("y",f).attr("width",d._options.legend.symbolSize).attr("height",d._options.legend.symbolSize).style("fill",function(a,b){return d._options._colorMap[a]}),k.on("mouseover",function(a){b.selectAll(".bChart_legend").classed("unhover",!0),b.selectAll(".bChart_groups").classed("unhover",!0),d3.select(this).classed("unhover",!1);var c=d._options._uniqueGroupArrayAll,e=c.indexOf(a),f=".bChart_groups"+e;b.selectAll(f).classed("unhover",!1)}).on("mouseout",function(a){b.selectAll(".bChart_legend").classed("unhover",!1),b.selectAll(".bChart_groups").classed("unhover",!1)}).on("click",function(e){var f=b.selectAll(".bChart_legend");a.length||(f.classed("inactive",!0),d._options._datasetTmp=d._options._dataset,d._options._uniqueGroupTmp=d._options._uniqueGroupArrayAll),c.isElementInArray(e,a)?(a.splice(c.getIndexOfElement(e,a),1),d3.select(this).classed("inactive",!0).classed("active",!1)):(a.push(e),d3.select(this).classed("inactive",!1).classed("active",!0)),d._options._uniqueGroupArrayAll=a,d._options._uniqueGroupArrayAll.sort(function(a,b){return c.getIndexOfElement(a,d._options._uniqueGroupTmp)-c.getIndexOfElement(b,d._options._uniqueGroupTmp)}),c.existy(d._options.secondAxis)&&(d._options.secondAxis=c.isOverlapArray(d._options._uniqueGroupArray2,a)||!a.length&&d._options._uniqueGroupArray2.length),a.length&&a.length!==d._options._uniqueGroupTmp.length||(f.classed("inactive",!1).classed("active",!1).classed("unhover",!1),d._options._uniqueGroupArrayAll=d._options._uniqueGroupTmp),d._updateDatasetBySelection(a),a.length===d._options._uniqueGroupTmp.length&&(a=[])})}else b.select(".legend").style("display","none")}var d=this;return c.existy(a)?(c.typeString(a)&&"refresh"===a?b():(d.setOptions(arguments,"legend"),b()),d):d._options.legend},c.prototype._updateDatasetBySelection=function(a){var b=this,c=[];a.length?c=b._options._datasetTmp.filter(function(b,c){return a.indexOf(b.group)>=0}):(c=b._options._datasetTmp,b._options._datasetTmp=[],b._options._uniqueGroupTmp=[]),b.constructor===m?(b.setOptions([c],"_dataset")._drawChartSVG(),b.title("refresh").tooltip("refresh")):b.setOptions([c],"_dataset").min("refresh").max("refresh").updateMin()._drawChartSVG().yLabel2("refresh").yAxis2("refresh").tooltip("refresh")},c.prototype.line=function(a){var b=this;if(c.existy(a)){if(c.typeString(a)&&"refresh"===a)b._drawLineSVG();else{if(2===arguments.length&&arguments[0].indexOf(".")>=0&&arguments[0].indexOf("$")>=0){var d=parseInt(arguments[0].split(".")[1].split("$")[1]),e=b._options._uniqueGroupArrayAll[d-1];arguments[0]=arguments[0].split(".")[0]+"."+e}b.setOptions(arguments,"line"),b._drawLineSVG()}return b}return b._options.line},c.prototype._drawLineSVG=function(a){var b,d,e=this,f=e._options._dataset,g=e._options._uniqueGroupArrayAll,h=d3.select(e._options.selector).select("g.bChart"),i=[];if(b=h.select(".bChart_lines").empty()?h.append("g").attr("class","bChart_lines"):h.select(".bChart_lines"),c.existy(a)){var j=function(a){var b=f.filter(function(b){return b.group===a});i.push(b)};c.each(e._options._uniqueGroupArrayAll,j),d=b.selectAll(".bChart_groups").data(i),d.exit().remove(),d.enter().append("path");var k=d3.svg.line().x(function(b){return a.x0(b.x)}).y(function(b){return b.secondAxis?a.y2(b.value):a.y(b.value)});d.attr("d",k)}return d.attr("class",function(a,b){return"bChart_groups bChart_groups"+g.indexOf(a[b].group)}).attr("fill-opacity",function(){return 0}).attr("stroke",function(a,b){return e._options._colorMap[a[b].group]}).attr("stroke-width",function(a,b){return e._options.line.width[a[b].group]}).attr("stroke-opacity",function(a,b){return e._options.line.opacity[a[b].group]}).style("opacity",.1).transition().duration(e._options.duration).style("opacity",1),e},c.initLineStyle=function(a){return function(b,d){var e=this;e._options.line[a][b]=c.hasProperty(e._options.line[a],b)?e._options.line[a][b]:d}},c.initLineType=c.initLineStyle("type"),c.initLineStrokeWidth=c.initLineStyle("width"),c.initLineStrokeOpacity=c.initLineStyle("opacity"),c.removeLineProperty=function(a){return function(b){var d=this;c.hasProperty(d._options.line[a],b)&&delete d._options.line[a][b]}},c.removeLineType=c.removeLineProperty("type"),c.removeLineStrokeWidth=c.removeLineProperty("width"),c.removeLineStrokeOpacity=c.removeLineProperty("opacity");var j={selector:"",colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],colorOpacity:1,duration:400,padding:{top:80,right:90,bottom:50,left:60},_colorMap:{},_datasetTmp:[],_uniqueGroupTmp:[],_uniqueXArray:[],_uniqueGroupArrayAll:[],_uniqueGroupArray2:[],_dataset:[],minDefault:-1,maxDefault:-1,minDefault2:-1,maxDefault2:-1,width:800,height:350,background:{imageURL:"",color:"#ffffff",displayImage:!1,opacity:1},secondAxis:!1,legend:{position:"topright",offsetText:5,offsetSymbol:15,symbolSize:10,multipleLine:!1,textFirst:!0,display:!0,fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},title:{display:!0,text:"Line Chart",fontType:"helvetica",fontSize:18,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},xLabel:{display:!0,text:"x label",rotation:0,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel:{display:!0,text:"y label",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel2:{display:!0,text:"y label second",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yAxis:{display:!0,displayLine:!0,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"left",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},yAxis2:{display:!0,displayLine:!1,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"right",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},xAxis:{display:!0,isTimeSeries:!1,displayLine:!0,tickNumber:5,tickFormat:"",tickPadding:3,tickSize:10,orientation:"bottom",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},tooltip:{display:!0,text:"tooltip",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#fff",width:"auto",height:"auto"},node:{display:!0,type:{},size:{},fillOpacity:{},strokeWidth:{}},line:{type:{},width:{},opacity:{}}},k=function(a){return c._customConstructor(this,a,arguments,"line")};c.LineChart=k,k.prototype=Object.create(c.prototype),k.prototype.constructor=k,k.prototype.draw=function(){var a=this;return c.getLength(d3.select(a._options.selector))?(a.min("refresh").max("refresh").updateMin(),a._options.secondAxis&&a.min2("refresh").max2("refresh").updateMin2(),a.colors("refresh")._drawChartSVG(),a.title("refresh").legend("refresh").tooltip("refresh").xLabel("refresh").yLabel("refresh").xAxis("refresh").yAxis("refresh"),void(a._options.secondAxis&&a.yLabel2("refresh").yAxis2("refresh"))):void console.log("Please make sure the element exists in your template.")},k.prototype._drawLineChart=function(){var a=this,b=a._initXYAxis();return a._drawLineSVG(b)._drawNodeSVG(b).node("refresh"),a},c.prototype.max2=function(a){var b=this;if(!c.existy(a))return b._options.maxDefault2;if(c.typeNumber(a))b._options.max2=a,b._options.maxDefault2=a;else if(c.typeString(a)&&"refresh"===a)if(b._options.isStack){var d=[];c.each(b._options._uniqueXArray,function(a,c,e){var f=b._options._dataset.filter(function(b){return a===b.x&&b.secondAxis});d.push(d3.sum(f,function(a){return parseFloat(a.value)}))}),b._options.maxDefault2=d3.max(d)}else c.existy(b._options.max2)?b._options.maxDefault2=b._options.max2:b._options.maxDefault2=d3.max(b._options._dataset,function(a){return a.secondAxis?parseFloat(a.value):void 0});return b},c.prototype.max=function(a){var b=this;if(!c.existy(a))return b._options.maxDefault;if(c.typeNumber(a))b._options.max=a,b._options.maxDefault=a;else if(c.typeString(a)&&"refresh"===a)if(b._options.isStack){var d=[];c.each(b._options._uniqueXArray,function(a,c,e){var f=b._options._dataset.filter(function(b){return a===b.x});d.push(d3.sum(f,function(a){return parseFloat(a.value)}))}),b._options.maxDefault=d3.max(d)}else c.existy(b._options.max)?b._options.maxDefault=b._options.max:b._options.maxDefault=d3.max(b._options._dataset,function(a){return parseFloat(a.value)});return b},c.prototype.min2=function(a){var b=this;return c.existy(a)?(c.typeNumber(a)?(b._options.min2=a,b._options.minDefault2=a):c.typeString(a)&&"refresh"===a&&(c.existy(b._options.min2)?b._options.minDefault2=b._options.min2:b._options.minDefault2=d3.min(b._options._dataset,function(a){return a.secondAxis?parseFloat(a.value):void 0})),b):b._options.minDefault2},c.prototype.min=function(a){var b=this;return c.existy(a)?(c.typeNumber(a)?(b._options.min=a,b._options.minDefault=a):c.typeString(a)&&"refresh"===a&&(c.existy(b._options.min)?b._options.minDefault=b._options.min:b._options.minDefault=d3.min(b._options._dataset,function(a){return parseFloat(a.value)})),b):b._options.minDefault},c.prototype.updateMin2=function(){var a=this;return c.existy(a._options.max2)||c.existy(a._options.min2)||(a._options.minDefault2-=(a._options.maxDefault2-a._options.minDefault2)/a._options.yAxis2.tickNumber),a},c.prototype.updateMin=function(){var a=this;return c.existy(a._options.max)||c.existy(a._options.min)||(a._options.minDefault-=(a._options.maxDefault-a._options.minDefault)/a._options.yAxis.tickNumber),a},c.prototype.node=function(a){var b=this;if(c.existy(a)){if(c.typeString(a)&&"refresh"===a)b._drawNodeSVG();else{if(2===arguments.length&&arguments[0].indexOf(".")>=0&&arguments[0].indexOf("$")>=0){var d=parseInt(arguments[0].split(".")[1].split("$")[1]),e=b._options._uniqueGroupArrayAll[d-1];arguments[0]=arguments[0].split(".")[0]+"."+e}b.setOptions(arguments,"node"),b._drawNodeSVG()}return b}return b._options.node},c.prototype._drawNodeSVG=function(a){var b,d,e=this,f=e._options._dataset,g=e._options._uniqueGroupArrayAll,h=d3.select(e._options.selector).select("g.bChart");b=h.select(".bChart_nodes").empty()?h.append("g").attr("class","bChart_nodes"):h.select(".bChart_nodes");var i=d3.svg.symbol().type(function(a){return e._options.node.type[a.group]}).size(function(a){return c.existy(a.size)?a.size:e._options.node.size[a.group]});return c.existy(a)?(d=b.selectAll(".bChart_groups").data(f),d.exit().remove(),d.enter().append("path"),d.attr("class",function(a){return"bChart_groups bChart_groups"+g.indexOf(a.group)}).attr("d",i).attr("transform",function(b){return b.secondAxis?"translate("+a.x0(b.x)+","+a.y2(b.value)+")":"translate("+a.x0(b.x)+","+a.y(b.value)+")"}).style("opacity",0).transition().duration(e._options.duration).style("opacity",1)):(d=b.selectAll(".bChart_groups"),e._options.node.display?(d.style("display","block"),d.attr("fill",function(a){var b=e._options._colorMap[a.group],c=b.split(",");return c[0]+","+c[1]+","+c[2]+","+e._options.node.fillOpacity[a.group]+")"}).attr("stroke-width",function(a){return e._options.node.strokeWidth[a.group]}).attr("d",i)):d.style("display","none")),e},c.initNodeStyle=function(a){return function(b,d){var e=this;e._options.node[a][b]=c.hasProperty(e._options.node[a],b)?e._options.node[a][b]:d}},c.initNodeType=c.initNodeStyle("type"),c.initNodeSize=c.initNodeStyle("size"),c.initNodeFillOpacity=c.initNodeStyle("fillOpacity"),c.initNodeStrokeWidth=c.initNodeStyle("strokeWidth"),c.initNodeStrokeOpacity=c.initNodeStyle("strokeOpacity"),c.removeNodeProperty=function(a){return function(b){var d=this;c.hasProperty(d._options.node[a],b)&&delete d._options.node[a][b]}},c.removeNodeType=c.removeNodeProperty("type"),c.removeNodeSize=c.removeNodeProperty("size"),c.removeNodeFillOpacity=c.removeNodeProperty("fillOpacity"),c.removeNodeStrokeWidth=c.removeNodeProperty("strokeWidth"),c.removeNodeStrokeOpacity=c.removeNodeProperty("strokeOpacity");var l={selector:"",colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],colorOpacity:1,duration:400,padding:{top:80,right:90,bottom:50,left:60},_colorMap:{},_datasetTmp:[],_uniqueXArray:[],_uniqueGroupTmp:[],_uniqueGroupArrayAll:[],_dataset:[],width:400,height:400,textRadiusDefault:"",outerRadiusDefault:"",background:{imageURL:"",color:"#ffffff",displayImage:!1,opacity:1},valueDisplay:{display:!0},legend:{position:"topright",offsetText:5,offsetSymbol:15,symbolSize:10,multipleLine:!1,textFirst:!0,display:!0,fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},title:{display:!0,text:"Pie Chart",fontType:"helvetica",fontSize:18,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},tooltip:{display:!0,text:"tooltip",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#fff",width:"auto",height:"auto"}},m=function(a){return c._customConstructor(this,a,arguments,"pie")};c.PieChart=m,m.prototype=Object.create(c.prototype),m.prototype.constructor=m,m.prototype.draw=function(){var a=this;return c.getLength(d3.select(a._options.selector))?(a.colors("refresh")._drawChartSVG(),void a.title("refresh").legend("refresh").tooltip("refresh")):void console.log("Please make sure the element exists in your template.")},m.prototype._drawPieChart=function(){var a=this;a._updateChartSize();var b=a._options._dataset,d=a._options._uniqueGroupArrayAll,e=d3.select(a._options.selector).select("g.bChart"),f=d3.sum(b,function(a){return parseFloat(a.value)});c.existy(a._options.outerRadius)?a._options.outerRadiusDefault=a._options.outerRadius:a._options.outerRadiusDefault=a._options._chartSVGWidth>a._options._chartSVGHeight?a._options._chartSVGHeight/2:a._options._chartSVGWidth/2,c.existy(a._options.textRadius)?a._options.textRadiusDefault=a._options.textRadius:a._options.textRadiusDefault=a._options.outerRadiusDefault/2;var g,h,i,j,k=d3.svg.arc().outerRadius(a._options.outerRadiusDefault).startAngle(function(a){return a.startAngle}).endAngle(function(a){return a.endAngle}),l=d3.layout.pie().value(function(a){return a.value}).sort(null);i=l(b),g=e.select(".bChart_pie").empty()?e.append("g").attr("class","bChart_pie"):e.select(".bChart_pie"),g.attr("transform","translate("+a._options._chartSVGWidth/2+","+a._options._chartSVGHeight/2+")");var m=function(a){var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return k(b(a))}};return h=g.selectAll(".bChart_arc").data(i),h.exit().remove(),h.enter().append("path").attr("class",function(a){return"bChart_arc bChart_groups bChart_groups"+d.indexOf(a.data.group)}).attr("fill",function(b){return a._options._colorMap[b.data.group]}).attr("stroke","#ffffff").each(function(a,b){b>0?this._current=i[b-1]:this._current={startAngle:0,endAngle:0}}).transition().duration(a._options.duration).attr("d",m),h.attr("fill",function(b){return a._options._colorMap[b.data.group]}).transition().duration(a._options.duration).attrTween("d",m),j=g.selectAll(".bChart_arc_text").data(i),a._options.valueDisplay.display?(j.style("display","block"),j.exit().remove(),j.enter().append("text").attr("class",function(a){return"bChart_arc_text bChart_groups bChart_groups"+d.indexOf(a.data.group)}),j.attr("transform",function(b){return"translate("+Math.cos((b.startAngle+b.endAngle-Math.PI)/2)*a._options.textRadiusDefault+","+Math.sin((b.startAngle+b.endAngle-Math.PI)/2)*a._options.textRadiusDefault+")"}).attr("text-anchor","middle").text(function(a){return d3.format("%")(a.data.value/f)}).attr("fill","#ffffff")):j.style("display","none"),a};var n={selector:"",colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],colorOpacity:1,duration:400,padding:{top:80,right:90,bottom:50,left:60},_colorMap:{},_datasetTmp:[],_uniqueGroupTmp:[],_uniqueXArray:[],_uniqueGroupArrayAll:[],_uniqueGroupArray2:[],_dataset:[],minDefault:-1,maxDefault:-1,minDefault2:-1,maxDefault2:-1,width:800,height:350,background:{imageURL:"",color:"#ffffff",displayImage:!1,opacity:1},secondAxis:!1,legend:{position:"topright",offsetText:5,offsetSymbol:15,symbolSize:10,multipleLine:!1,textFirst:!0,display:!0,fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},title:{display:!0,text:"Scatter Chart",fontType:"helvetica",fontSize:18,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},xLabel:{display:!0,text:"x label",rotation:0,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel:{display:!0,text:"y label",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yLabel2:{display:!0,text:"y label second",rotation:-90,fontType:"helvetica",fontSize:14,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#000000",offsetAdjust:{horizontal:0,vertical:0}},yAxis:{display:!0,displayLine:!0,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"left",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},yAxis2:{display:!0,displayLine:!1,tickNumber:8,tickFormat:d3.format(",.0f"),tickPadding:3,tickSize:10,orientation:"right",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},xAxis:{display:!0,isTimeSeries:!1,displayLine:!0,tickNumber:5,tickFormat:"",tickPadding:3,tickSize:10,orientation:"bottom",tickValue:[],fontColor:"#000",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,tickLineColor:"#ccc",tickLineWidth:.2,axisColor:"#000",axisWidth:1,rotation:0,offsetAdjust:{horizontal:0,vertical:0}},tooltip:{display:!0,text:"tooltip",fontType:"helvetica",fontSize:12,fontBold:!1,fontItalic:!1,fontUnderline:!1,fontColor:"#fff",width:"auto",height:"auto"},node:{display:!0,type:{},size:{},fillOpacity:{},strokeWidth:{}}},o=function(a){return c._customConstructor(this,a,arguments,"scatter")};return c.ScatterChart=o,o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.prototype.draw=function(){var a=this;return c.getLength(d3.select(a._options.selector))?(a.min("refresh").max("refresh").updateMin(),a._options.secondAxis&&a.min2("refresh").max2("refresh").updateMin2(),a.colors("refresh")._drawChartSVG(),a.title("refresh").legend("refresh").tooltip("refresh").xLabel("refresh").yLabel("refresh").xAxis("refresh").yAxis("refresh"),void(a._options.secondAxis&&a.yLabel2("refresh").yAxis2("refresh"))):void console.log("Please make sure the element exists in your template.")},o.prototype._drawScatterChart=function(){var a=this,b=a._initXYAxis();return a._drawNodeSVG(b).node("refresh"),a},c.prototype.title=function(a){function b(){var a,b=d3.select(d._options.selector).select("g.bChart");d._options.title.display?(a=b.select(".bChart_title").empty()?b.append("g").append("text").attr("class","bChart_title"):b.select(".bChart_title").style("display","block"),a.attr("x",d._options._chartSVGWidth/2+d._options.title.offsetAdjust.horizontal).attr("y",-d._options.padding.top+d._options.title.offsetAdjust.vertical+30).attr("text-anchor","middle").style("font-size",d._options.title.fontSize).style("font-family",d._options.title.fontType).style("fill",d._options.title.fontColor).style("text-decoration",function(){return d._options.title.fontUnderline?"underline":"none"}).style("font-weight",function(){return d._options.title.fontBold?"bold":"normal"}).style("font-style",function(){return d._options.title.fontItalic?"italic":"normal"}).text(d._options.title.text)):b.select(".bChart_title").style("display","none")}var d=this;return c.existy(a)?(c.typeString(a)&&"refresh"===a?b():(d.setOptions(arguments,"title"),b()),d):d._options.title},c.prototype.tooltip=function(a){function b(){var a,b=d3.select(d._options.selector);if(d._options.tooltip.display){a=b.select(".bChart_tooltip").empty()?b.append("div").attr("class","bChart_tooltip").style("opacity",0):b.select(".bChart_tooltip").style("opacity",0);var c=b.selectAll(".bChart_groups");if(c.on("mouseover",function(b){d3.select(this).style("opacity",.7),a.transition().duration(d._options.duration).style("opacity",1).style("display","block")}).on("mousemove",function(b){var c;c=d.constructor===m?b.data.group+" : "+b.value:b.group+"("+b.x+") :"+b.value;var e=d3.select(this).style("fill"),f=d3.event.hasOwnProperty("offsetX")?d3.event.offsetX:d3.event.layerX,g=d3.event.hasOwnProperty("offsetY")?d3.event.offsetY:d3.event.layerY;a.style("background",e).style("top",g-10+"px").style("left",f+10+"px").style("font-family",d._options.tooltip.fontType).style("text-decoration",function(){return d._options.tooltip.fontUnderline?"underline":"none"}).style("font-weight",function(){return d._options.tooltip.fontBold?"bold":"normal"}).style("font-style",function(){return d._options.tooltip.fontItalic?"italic":"normal"}).style("font-size",d._options.tooltip.fontSize).style("color",d._options.tooltip.fontColor).html(c)}).on("mouseout",function(b){d3.select(this).style("opacity",1),a.transition().duration(d._options.duration).style("opacity",0).style("display","none")}),!b.select(".bChart_lines").empty()){var e=b.select(".bChart_lines").selectAll(".bChart_groups");e.on("mouseover",null).on("mousemove",null).on("mouseout",null)}if(!b.select(".bChart_areas").empty()){var f=b.select(".bChart_areas").selectAll(".bChart_groups");f.on("mouseover",null).on("mousemove",null).on("mouseout",null)}if(!b.select(".bChart_pie").empty()){var g=b.select(".bChart_pie").selectAll(".bChart_arc_text");g.on("mouseover",null).on("mousemove",null).on("mouseout",null)}}else a.remove()}var d=this;return c.existy(a)?(c.typeString(a)&&"refresh"===a?b():(d.setOptions(arguments,"tooltip"),b()),d):d._options.tooltip},c.prototype.xAxis=function(a){function b(){var a=d3.select(d._options.selector).select("g.bChart"),b=a.select(".bChart_x_axis").selectAll("path"),c=a.select(".bChart_x_axis").selectAll("line"),e=a.select(".bChart_x_axis").selectAll("text");if(d._options.xAxis.display){b.style("stroke-width",d._options.xAxis.axisWidth).style("stroke",d._options.xAxis.axisColor).style("display","block"),e.style("display","block");var f,g,h;switch(d._options.xAxis.rotation){case-45:f="0",g="1em",h="end";break;case-90:f="-.5em",g="0",h="end";break;case 45:f="0em",g="1em",h="start";break;case 90:f=".5em",g="0",h="start";break;case 0:f="0",g="1em",h="middle"}e.style("text-anchor",h).attr("dx",f).attr("dy",g).attr("transfrom",function(a){return"rotate("+d._options.xAxis.rotation+")"}).style("font-size",d._options.xAxis.fontSize).style("fill",d._options.xAxis.fontColor).style("text-decoration",function(){return d._options.xAxis.fontUnderline?"underline":"none"}).style("font-weight",function(){return d._options.xAxis.fontBold?"bold":"normal"}).style("font-style",function(){return d._options.xAxis.fontItalic?"italic":"normal"}).style("font-family",d._options.xAxis.fontType)}else b.style("display","none"),e.style("display","none");d._options.xAxis.displayLine?c.style("stroke-width",d._options.xAxis.tickLineWidth).style("stroke",d._options.xAxis.tickLineColor).style("display","block"):c.style("display","none")}var d=this;return c.existy(a)?(c.typeString(a)&&"refresh"===a?b():(d.setOptions(arguments,"xAxis"),b()),d):d._options.xAxis},c.prototype.xLabel=function(a){function b(){var a,b,c,e=d3.select(d._options.selector).select("g.bChart");d._options.xLabel.display?(a=e.select(".bChart_xlabel").empty()?e.append("g").append("text").attr("class","bChart_xlabel"):e.select(".bChart_xlabel").style("display","block"),b=d._options._chartSVGWidth/2+d._options.xLabel.offsetAdjust.horizontal,c=d._options._chartSVGHeight+d._options.padding.bottom-10-d._options.xLabel.offsetAdjust.vertical,a.style("font-size",d._options.xLabel.fontSize).style("font-family",d._options.xLabel.fontType).style("fill",d._options.xLabel.fontColor).attr("x",b).attr("y",c).style("text-anchor","middle").style("text-decoration",function(){return d._options.xLabel.fontUnderline?"underline":"none"}).style("font-weight",function(){return d._options.xLabel.fontBold?"bold":"normal"}).style("font-style",function(){return d._options.xLabel.fontItalic?"italic":"normal"}).attr("transform",function(a){return"rotate("+d._options.xLabel.rotation+" "+b.toString()+" "+c.toString()+")"}).text(d._options.xLabel.text)):e.select(".bChart_xlabel").style("display","none")}var d=this;return c.existy(a)?(c.typeString(a)&&"refresh"===a?b():(d.setOptions(arguments,"xLabel"),b()),d):d._options.xLabel},c.prototype.yAxis2=function(a){var b=this;if(!b._options.secondAxis){var d=d3.select(b._options.selector).select("g.bChart");return d.select(".bChart_y_axis_2").style("display","none"),b}return c.existy(a)?(c.typeString(a)&&"refresh"===a?b.yAxis("yAxis2"):(b.setOptions(arguments,"yAxis2"),b.yAxis("yAxis2")),b):b._options.yAxis2},c.prototype.yAxis=function(a){function b(a){var b,e,f,g,h,i,j,k=d3.select(d._options.selector).select("g.bChart");if(c.existy(a)&&a?(b="yAxis2",e=k.select(".bChart_y_axis_2"),f=k.select(".bChart_y_axis_2").selectAll("path"),g=k.select(".bChart_y_axis_2").selectAll("line"),h=k.select(".bChart_y_axis_2").selectAll("text"),i=d._options.minDefault2,j=d._options.maxDefault2):(b="yAxis",e=k.select(".bChart_y_axis"),f=k.select(".bChart_y_axis").selectAll("path"),g=k.select(".bChart_y_axis").selectAll("line"),h=k.select(".bChart_y_axis").selectAll("text"),i=d._options.minDefault,j=d._options.maxDefault),d._options[b].display){var l=d3.scale.linear().range([d._options._chartSVGHeight,0]).domain([i,j]),m=d3.svg.axis().scale(l).orient(d._options[b].orientation).tickFormat(d._options[b].tickFormat).ticks(d._options[b].tickNumber).tickSize(d._options[b].tickSize,0,0);e.transition().duration(d._options.duration).ease("sin-in-out").call(m),e.style("display","block"),f.style("stroke-width",d._options[b].axisWidth).style("stroke",d._options[b].axisColor).style("display","block"),h.style("display","block");var n,o,p;switch(d._options[b].rotation){case-45:a?(n=".1em",o="-1em",p="start"):(n="-.1em",o="-1em",p="end");break;case-90:a?(n="0.5em",o="-.5em",p="middle"):(n="0.5em",o="-.5em",p="middle");break;case 45:a?(n=".1em",o="1em",p="start"):(n=".1em",o="1em",p="end");break;case 90:a?(n="0em",o="1em",p="middle"):(n="0em",o="1em",p="middle");break;case 0:a?(n="0em",o="0.3em",p="start"):(n="0em",o="0.3em",p="end")}h.style("text-anchor",p).attr("dx",n).attr("dy",o).attr("transfrom",function(a){return"rotate("+d._options[b].rotation+")"}).style("font-size",d._options[b].fontSize).style("fill",d._options[b].fontColor).style("text-decoration",function(){return d._options[b].fontUnderline?"underline":"none"}).style("font-weight",function(){return d._options[b].fontBold?"bold":"normal"}).style("font-style",function(){return d._options[b].fontItalic?"italic":"normal"}).style("font-family",d._options[b].fontType)}else f.style("display","none"),h.style("display","none");d._options[b].displayLine?g.style("stroke-width",d._options[b].tickLineWidth).style("stroke",d._options[b].tickLineColor).style("display","block"):g.style("display","none")}var d=this;return c.existy(a)?(c.typeString(a)&&"refresh"===a?b():"yAxis2"===a?b(!0):(d.setOptions(arguments,"yAxis"),b()),d):d._options.yAxis},c.prototype.yLabel2=function(a){var b=this;if(!b._options.secondAxis){var d=d3.select(b._options.selector).select("g.bChart");return d.select(".bChart_ylabel_2").style("display","none"),b}return c.existy(a)?(c.typeString(a)&&"refresh"===a?b.yLabel("yLabel2"):(b.setOptions(arguments,"yLabel2"),b.yLabel("yLabel2")),b):b._options.yLabel2},c.prototype.yLabel=function(a){function b(a){var b,e,f,g;b=c.existy(a)&&a?"yLabel2":"yLabel";var h=d3.select(d._options.selector).select("g.bChart");d._options[b].display?(g=c.existy(a)&&a?h.select(".bChart_ylabel_2").empty()?h.append("g").append("text").attr("class","bChart_ylabel_2"):h.select(".bChart_ylabel_2").style("display","block"):h.select(".bChart_ylabel").empty()?h.append("g").append("text").attr("class","bChart_ylabel"):h.select(".bChart_ylabel").style("display","block"),
e=d._options._chartSVGHeight/2-d._options[b].offsetAdjust.vertical,f=c.existy(a)&&a?d._options.padding.left+d._options._chartSVGWidth+d._options[b].offsetAdjust.horizontal:-d._options.padding.left+25+d._options[b].offsetAdjust.horizontal,g.style("text-anchor","middle").style("fill",d._options[b].fontColor).attr("y",e).attr("x",f).attr("transform",function(a){return"rotate("+d._options[b].rotation+" "+f.toString()+" "+e.toString()+")"}).style("font-size",d._options[b].fontSize).style("font-family",d._options[b].fontType).style("text-decoration",function(){return d._options[b].fontUnderline?"underline":"none"}).style("font-weight",function(){return d._options[b].fontBold?"bold":"normal"}).style("font-style",function(){return d._options[b].fontItalic?"italic":"normal"}).text(d._options[b].text)):c.existy(a)&&a?h.select(".bChart_ylabel_2").style("display","none"):h.select(".bChart_ylabel").style("display","none")}var d=this;return c.existy(a)?(c.typeString(a)&&"refresh"===a?b():"yLabel2"===a?b(!0):(d.setOptions(arguments,"yLabel"),b()),d):d._options.yLabel},c});